---
title: "Marketing report part 1"
date: 1900-01-01
author: 
  - Norah Jones   
  - Bill Gates
format: 
  html:
    toc: true
    code-fold: true
    number-sections: true
    embed-resources: true
editor: source
---

```{r }
#| label: libraries
#| echo: false

# Check out https://quarto.org/docs/output-formats/html-basics.html
## to get started with html documents

# Check out https://quarto.org/docs/reference/formats/html.html
## to examine all the possible options for html documents

# You can control the execution options of each code 
# chunk
## For more information check out 
### https://quarto.org/docs/computations/execution-options.html
# You can include the libraries you are going to use here
library(sweep)
```

# Describing data

Please clean all the instructions in the different sections including this text and add the necessary text to present the report.  

## Introduction

Once your group has finish filling all the sections, add some text here describing the principal findings. Be straightforward and concise taking into account that it is an executive report.

## Import data

Add some text related to importing the data.

```{r}
# Import the data from the sweep package
bike_sales <- bike_sales
```

## Inspect data

Add some text related to inspecting the data.

Use the available functions from base R or the `tidyverse` to inspect the data

```{r}
# You can use str from base R 
# or glimpse from the tidyverse
## If you use glimpse remember to load the 
## the library in the first code chunk: library(tidyverse)
### For example glimpse(bike_sales)
```

## Summarize data

Add some text pointing out the principal findings as a result of calculating some summary statistics and counting different combination of categories

### Summary statistics

In this section calculate some summary statistics using base R or the `skimr` package

```{r}
# You can use summary from base R
# or skim from the skimr package 
## If you use skim remember to load the 
## the library in the first code chunk: library(skimr)
### Try the 2 options: skim(bike_sales) or summary(bike_sales)
### and select the one you prefer
```

### Counting

Remember that you want to support the Research and Development (R & D) division in identifying potential new products

You can use the `count` function from the `tidyverse` and the variables `category.secondary` and `frame` to identify [product gaps](https://en.wikipedia.org/wiki/Gap_analysis). In that way you can identify possible new models that are not yet offered by the corporation but that can potentially generate an important revenue:

-   First, check the specific bicycle categories: `bike_sales |> count(category.secondary)`

-   Second, check the bicycle frame materials: `bike_sales |> count(frame)`

-   Third, you can calculate the possible combinations (Hint: There are $9 \times 2 = 18$ possible combinations)

Applying the above steps, you can proceed in the following way to identify [product gaps](https://en.wikipedia.org/wiki/Gap_analysis) (Hint: Only $13$ combinations are available which means that $18 - 13 = 5$ new models can be explored):

```{r}
#| code-fold: show
#| eval: false
# If you have loaded the tidyverse library, library(tidyverse),
## you can learn more about this function using ?count or
## check out https://dplyr.tidyverse.org/reference/count.html
## so see the documentation online
bike_sales |>
  count(category.secondary, frame)
```

Also remember that you want to support the marketing team in the creation of a marketing segmentation clustering model. Therefore the first step is to know the bicycle shops and the number of transactions. You can proceed in the following way as a first step:

```{r}
#| code-fold: show
#| eval: false

# Explore the argument sort in the count function
## You can check the documentation using ?count or
## checking it online 
### https://dplyr.tidyverse.org/reference/count.html
bike_sales |>
  count(bikeshop.name)
```

## Data visualization

Add some text pointing out the principal findings as a result of visualizing the suggested variables.

### Histograms

Check the distribution of the variables `quantity` and `price` to understand its behavior using the function `hist` from base R or the `tidyverse` through the package `ggplot2`

#### Quantity behavior

```{r}
# If you use base R check out the hist documentation
## ?hist
# If you use the tidyverse check out the geom_histogram
# documentation
## ?geom_histogram
### Also you can check out the online documentation in the 
### case of the tidyverse
#### https://ggplot2.tidyverse.org/reference/geom_histogram.html
```

#### Price behavior

```{r}
# Check out the comments pointed out in the 
# Quantity behavior code chunk section
```

### Boxplots

In this section generate 2 boxplots to explore the following items and point out the main finding in relation to these visualizations:

-   Examine the revenue generated by the corporation, `price.ext`, according to the specific bicycle categories, `category.secondary`

-   Examine the revenue generated by the corporation, `price.ext`, according to the bicycle frame material, `frame`

```{r}
# You can use the function boxplot, ?boxplot,from base R
# or the function geom_boxplot, ?geom_boxplot,from the 
# tidyverse
## If you use the tidyverse check out the 
## online documentation in
### https://ggplot2.tidyverse.org/reference/geom_boxplot.html
```

## Questions answered with data

This is a miscellaneous section where the idea is to answer questions using the `bike_sales` data set. Answer the following questions using the `tidyverse` and the functions `group_by`, `summarise`, `mutate`, `fct_reorder`, `ggplot` and `geom_col`:

-   What are the bike shops, `bikeshop.name`, that generate more revenue, `price.ext`, to the corporation?

-   What are the specific bicycle categories, `category.secondary`, that generate more revenue, `price.ext`, to the corporation?

To answer the above questions divide the process in 2 states:

-   First, prepare the data
-   Second, visualize the data

You can use the following example as a guidance where the variable `bikeshop.city` is used to answer what cities generate more revenue, `price.ext`:

```{r}
#| code-fold: show
#| eval: false

# Prepare data
bike_sales_total_revenue_by_city <- bike_sales |> 
  group_by(bikeshop.city) |> 
  summarise(total_revenue = sum(price.ext)) |> 
  mutate(bikeshop.city = fct_reorder(.f = bikeshop.city,
                                     .x = total_revenue)) 

# Visualize data
bike_sales_total_revenue_by_city |> 
  ggplot(aes(x = total_revenue, y = bikeshop.city)) + 
  geom_col()
```
